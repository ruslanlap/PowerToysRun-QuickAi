<Window x:Class="Community.PowerToys.Run.Plugin.QuickAI.ResultsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="QuickAI Response"
        Height="650"
        Width="850"
        MinHeight="400"
        MinWidth="500"
        WindowStartupLocation="CenterScreen"
        WindowStyle="SingleBorderWindow"
        AllowsTransparency="False"
        Background="#1E1E1E"
        Foreground="#E4E4E4"
        ResizeMode="CanResizeWithGrip">
    
    <Window.Resources>
        <!-- Dark Theme Colors -->
        <SolidColorBrush x:Key="DarkBackground" Color="#1E1E1E"/>
        <SolidColorBrush x:Key="DarkSurface" Color="#252526"/>
        <SolidColorBrush x:Key="DarkBorder" Color="#3C3C3C"/>
        <SolidColorBrush x:Key="DarkText" Color="#E4E4E4"/>
        <SolidColorBrush x:Key="DarkTextSecondary" Color="#A0A0A0"/>
        <SolidColorBrush x:Key="DarkAccent" Color="#0078D4"/>
        <SolidColorBrush x:Key="DarkCodeBackground" Color="#1A1A1A"/>
        
        <!-- Light Theme Colors -->
        <SolidColorBrush x:Key="LightBackground" Color="#FAFAFA"/>
        <SolidColorBrush x:Key="LightSurface" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="LightBorder" Color="#E0E0E0"/>
        <SolidColorBrush x:Key="LightText" Color="#1E1E1E"/>
        <SolidColorBrush x:Key="LightTextSecondary" Color="#666666"/>
        <SolidColorBrush x:Key="LightAccent" Color="#0078D4"/>
        <SolidColorBrush x:Key="LightCodeBackground" Color="#F4F4F4"/>
        
        <!-- Button Style -->
        <Style x:Key="ToolbarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Foreground}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="2,0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#3C3C3C"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#505050"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header/Toolbar -->
        <Border Grid.Row="0" 
                Background="#252526" 
                BorderBrush="#3C3C3C" 
                BorderThickness="0,0,0,1"
                Name="HeaderBorder">
            <Grid Margin="12,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="&#xE8BD;" FontFamily="Segoe MDL2 Assets" FontSize="16" 
                               VerticalAlignment="Center" Margin="0,0,10,0" Foreground="#0078D4"/>
                    <TextBlock Text="QuickAI Response" FontSize="14" FontWeight="SemiBold" 
                               VerticalAlignment="Center" Name="TitleText"/>
                    <TextBlock Text=" · Streaming" FontSize="12" Foreground="#A0A0A0" 
                               VerticalAlignment="Center" Name="StatusText" Visibility="Collapsed"/>
                </StackPanel>
                
                <!-- Toolbar Buttons -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="&#xE8C8;  Copy" Style="{StaticResource ToolbarButtonStyle}" 
                            Name="CopyButton" Click="CopyButton_Click" ToolTip="Copy to clipboard (Ctrl+C)">
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="&#xE8C8;" FontFamily="Segoe MDL2 Assets" 
                                               VerticalAlignment="Center" Margin="0,0,6,0"/>
                                    <TextBlock Text="Copy" VerticalAlignment="Center"/>
                                </StackPanel>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>
                    <Button Style="{StaticResource ToolbarButtonStyle}" 
                            Name="WrapButton" Click="WrapButton_Click" ToolTip="Toggle word wrap">
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="&#xE8B3;" FontFamily="Segoe MDL2 Assets" 
                                               VerticalAlignment="Center" Margin="0,0,6,0"/>
                                    <TextBlock Text="Wrap" VerticalAlignment="Center"/>
                                </StackPanel>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content Area -->
        <Border Grid.Row="1" Margin="0" Background="#1E1E1E" Name="ContentBorder">
            <FlowDocumentScrollViewer Name="OutputViewer" 
                                      Padding="20,16"
                                      VerticalScrollBarVisibility="Auto"
                                      HorizontalScrollBarVisibility="Disabled"
                                      IsToolBarVisible="False"
                                      Zoom="100">
                <FlowDocument Name="OutputDocument"
                              FontFamily="Cascadia Code, Consolas, Segoe UI"
                              FontSize="14"
                              Foreground="#E4E4E4"
                              Background="Transparent"
                              PagePadding="0"
                              TextAlignment="Left"
                              LineHeight="24">
                </FlowDocument>
            </FlowDocumentScrollViewer>
        </Border>
        
        <!-- Footer/Status Bar -->
        <Border Grid.Row="2" 
                Background="#252526" 
                BorderBrush="#3C3C3C" 
                BorderThickness="0,1,0,0"
                Name="FooterBorder">
            <Grid Margin="12,6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" 
                           Name="CharCountText" 
                           Text="0 characters" 
                           FontSize="11" 
                           Foreground="#A0A0A0"
                           VerticalAlignment="Center"/>
                
                <TextBlock Grid.Column="1" 
                           Text="Ctrl+C to copy · Esc to close" 
                           FontSize="11" 
                           Foreground="#606060"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
    
    <Window.InputBindings>
        <KeyBinding Key="C" Modifiers="Control" Command="{x:Static ApplicationCommands.Copy}"/>
        <KeyBinding Key="Escape" Command="{x:Static ApplicationCommands.Close}"/>
    </Window.InputBindings>
    
    <Window.CommandBindings>
        <CommandBinding Command="{x:Static ApplicationCommands.Copy}" Executed="Copy_Executed"/>
        <CommandBinding Command="{x:Static ApplicationCommands.Close}" Executed="Close_Executed"/>
    </Window.CommandBindings>
</Window>
